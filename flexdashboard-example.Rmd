---
title: "Flexdashboard + crosstalk + leaflet"
output: 
  flexdashboard::flex_dashboard:
    orientation: columns
---

```{r setup, include=FALSE}
library(flexdashboard)
library(crosstalk)
library(d3scatter)
library(leaflet)
library(dygraphs)
shared_mtcars <- SharedData$new(mtcars)
shared_iris <- SharedData$new(iris)
shared_quakes <- SharedData$new(quakes[sample(nrow(quakes), 100),])
```


### Quakes map

Note: leaflet seems to cause crashes when interacting with other htmlwidgets within flexdashboard, but only within the RStudio viewer. Seems fine in Chrome.

```{r}
leaflet(shared_quakes, width = "100%", height = 300) %>%
    addTiles() %>%
    addCircleMarkers()
```

### Depth vs magnitude

```{r}
d3scatter(shared_quakes, ~depth, ~mag, width = "100%", height = 300)
```

### Filters

```{r}
filter_slider("depth", "Depth", shared_quakes, ~depth, width = "100%")
filter_slider("magnitude", "Magnitude", shared_quakes, ~mag, width = "100%")
```

